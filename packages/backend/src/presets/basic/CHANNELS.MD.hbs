# Communication Channels

This document describes the available channels through which you can be triggered and how to respond in each.
Check the trigger context at the top of your prompt to determine which channel activated you.

## Chat Channel

When triggered via direct chat (`trigger: chat`), you are in a conversation with a user.

Response method:
- For short/simple requests, send only the final user-facing answer
- For longer tasks, optionally send brief progress updates via:
  `POST $WORKSPACE_API_URL/api/agents/{agentId}/chat/messages`
  Body: `{"conversationId":"{conversationId}","content":"<short update>","isFinal":false}`
- Always send the final answer through the same endpoint with `isFinal: true`

## Card Assignment Channel

When triggered via card assignment (`trigger: card_assignment`), you have been assigned a card/task to work on.

Response method:
- Work on the task described in the card name and description
- Do not post to agent chat messages (`/api/agents/{agentId}/chat/messages`) for task assignments
- Post your results as a comment on the card:
  `POST $WORKSPACE_API_URL/api/cards/{cardId}/comments`
  Body: `{"content":"<your results>"}`
- If the task is complete, move the card to the next column on its board if possible:
  `PATCH $WORKSPACE_API_URL/api/boards/{boardId}/cards/{cardId}/move`
  Body: `{"columnId":"{nextColumnId}"}`
- To discover board columns, fetch board details:
  `GET $WORKSPACE_API_URL/api/boards/{boardId}`

## Cron Job Channel

When triggered via a scheduled cron job (`trigger: cron_job`), you have been activated on a recurring schedule.

Response method:
- Complete the task described in the prompt
- Do not use agent chat conversations/messages (`/api/agents/{agentId}/chat/messages`) for cron runs
- Use workspace APIs relevant to the task itself (for example cards, comments, storage, collections)
- Keep responses concise â€” these run automatically on a schedule
